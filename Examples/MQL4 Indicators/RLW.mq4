<metadata>
0b37e6d99ee6d6bbcda1b6963f490560384ab5c6620b3e51dfb1cff21e3cd5e45c72546493b198b86c09fd936e0d701f1f7b6801610fdcbbf4c93d1fe09566122543577adbe3a48688b7447aae92ef82f996e3876c19e08ce6833e1e6b1dc6a32e5c483b751c6c0383ed9da08eac93a2e5cbf6c662409ea0bb87e28cf796462b5431c9f7280d65372e0ef8b44c2d84f6a3d1572e0222d681137aec80f69a355c83e2066b2c5fb18d2d02fc924524cca1a8cd7e4086ba9bef403981f19ffa340ab9f082ec3f5be38a731084e5e094c9a67c0e18241f30cabe077e5a2a4d28754b102c8ee2ddbc721c4a2d7d084928fa9db6d3546a24699ccdb5f9093d80bcf0df5f337617fe90ea8d50256e0f2b4c99fcebd58bb71e7fa8dd15610c644c23d0a22618526eecc337564134aadeb3db88e7b1c382bc8ab6c7a4137ca8c5dcacb1d008662950b58b5a66b798fa994926711ce696debf2b450d74b688764a583b006f2a47a8c5d1b4e48a0c78156694aa0154483bcda8bbc847670b58d2a6ef807310630bcfae05766511bed7d8bb2909097d274887a7dbbf1174ec9803662d5f1479e9802947385d95b57e11572132577200c6a458375e2b88efb8d0c9bde2c28fee513f51354969b6d9a4d24f2ae496f98ad4bb5b372642f0d0caa65336ccbab6d325493d4edae63f102a49a6c993fe84e933561b751f6bec9fae902418cface58a93e3b6cf46340a639bfcec84d1a5255691afedd1d7f8bbd8b2ddf58520591f6d157c3057cea6f581a5d68cb299a5117557360b7fe782125ddbbdb5f68bf9c7a2eb8ac3b785ecb9d66c026856e7d6f5c389a7be8f52605876fdcf15253b0bf6cf201cd3fc4723583905714f2afcb357316a29ccbe482d1c7d76022148f798d6b8e8d669552b4e5e26e898c6820a6b51251a7fdce2e8d877467f511f2f95a43f11447481b171418ebfeed2efc05431275f7404febacdac36424c296759fcc02f5f97f6d5a6ed9e0e79bad591e35337a698ad91d3fcc8b8ec8d23501f6ca9de96f96b19781c3709734f6807add890e46616562399ed1c2287dcf1d47828a8fa692666212b790e4fe4a9aa8f772a673bc68f147ac3a7442db7d46908d7a3600fe496a8dbeeb21428220d3f5005702c586e1eb5c0fc886b55dae6a4c12159a2c306684e02f091056bb2d5231d6434186a82edb4e00a78b5d43b5fcfaa6210420e1e7fb0deed8a7401432299fe88ede9d59fb04421493189e8690798d43253a2cc4621dce2f8c4a0d210755e385c390b79c3a62648593a492ca5d6a59bcbf70072d5b01f79b0d5750753363957c3a00d682d13e1ba9fbae4b4b8ea044b25624b19cd8ce7aa97b2267bb8e46c3cf6972447cea570113e59bcd9b7c49cc093fe6514442889bd1937fc8c9efd264ba995e7c830423e5bd8bedfba0f7de683e38d395a81e41e20a39f042b95e7197ceb8d167393e1eb8e0f61462599fcb5c69ca26e52d2bbcba5ef8b442d7714b4d56e1a2f406614a7e84939fc88157cb3dca6c85221a2828efd91f4d4a44021a1d34a2bdfab5530ffc288aa3b6f9be90570aecb597b89b7506c92febfd698f605606646600e6405325f7316c0fd614348049ff66a04a1c4604093a2dffdf1d19efd5f308ae6157aaddfc1fc7250072a9baa625694a32a1d88bcffcf2110eaddd3f109295221c3b79ce5f29ea4c181bc0e2c5767092bebcbd2a5c3aacca8b8cca4cc95a89bb90a3b35177b5b65161a6399f480e2355a64084c71c2e0b7850233d2e50725f1d16016e881354682eb3c5e026e4f2a704d5a7884d0f684f68365008eace8d66c503b147a16bad3a8c6f3962d1380bceec16b022a44dcb8224b284b80e183f78be4f28098d7e2923f4bef86d3bc345abfccd2ec310dee9df7920270375e3f5a285ba49ac98f1071701c61123b5e073b2d02b0c3e1849ae8731ad0b5aedd3c02aa96aad8fb9e770373276019fb8bacc96856ffbb6906acd9ea8819754f2a6c508da29be9395cc4b0eeba166faadab4d11f21a09ce28fe786790190d2214064167d0e490b6706dab9bbd0645a02327e42210ea8c57b1a1860490be584c0b2ff8cdb9952332546442f6759112d224748269dfcaecc8de1ef8ac9886905a2c7f0820f7b9ceff5cb3a7c0f6e036f0c7f22478ab63619c4a19df334551b79a9c5f99ca9e86f038eebbfcdf88c631082bce3dfa7c2b1dfdabb66041478c2a7fab9640989fde5979de4251bfeb85435721e5a29d6b3c1fd57785a3fe58b3352b2d0ee8263060645cda0f1856a1881f8cbf5566a573284ead8b9ef8ddeb21f7a87ce610f2b5fe59794f5debcf594d8aadce2f5b382e3adc1691ae88dab97527d31541e706f0e5b3990fc57324f065d339bef7604c0a11b7989e8becc457bb38f59765538402f0c68abde9ef2395c2d13660733f7675d13309478250008fc9eb4
</metadata>
//---------------------------------------------------
// Project: RLW
// Language: MQL4
// Type: Indicator
// Author: 
// Company: 
// Copyright: 
// Created: 16.12.2009
//---------------------------------------------------
#property indicator_separate_window
#property indicator_minimum -100
#property indicator_maximum 0
#property indicator_buffers 1
#property indicator_color1 DodgerBlue
#property indicator_level1 -20
#property indicator_level2 -80
//---- input parameters
extern int ExtWPRPeriod = 14;
//---- buffers
double ExtWPRBuffer[];
//+------------------------------------------------------------------+
//| Custom indicator initialization function                         |
//+------------------------------------------------------------------+
int init()
  {
   string sShortName;
//---- indicator buffer mapping
   SetIndexBuffer(0, ExtWPRBuffer);
//---- indicator line
   SetIndexStyle(0, DRAW_LINE);
//---- name for DataWindow and indicator subwindow label
   sShortName="%R(" + ExtWPRPeriod + ")";
   IndicatorShortName(sShortName);
   SetIndexLabel(0, sShortName);
//---- first values aren't drawn
   SetIndexDrawBegin(0, ExtWPRPeriod);
//----
   return(0);
  }
//+------------------------------------------------------------------+
//| Williams’ Percent Range                                          |
//+------------------------------------------------------------------+
int start()
  {
   int i, nLimit, nCountedBars;  
//---- insufficient data
   if(Bars <= ExtWPRPeriod) 
       return(0);
//---- bars count that does not changed after last indicator launch.
   nCountedBars = IndicatorCounted();
//----Williams’ Percent Range calculation
   i = Bars - ExtWPRPeriod - 1;
   if(nCountedBars > ExtWPRPeriod) 
       i = Bars - nCountedBars - 1;  
   while(i >= 0)
     {
       double dMaxHigh = High[Highest(NULL, 0, MODE_HIGH, ExtWPRPeriod, i)];
       double dMinLow = Low[Lowest(NULL, 0, MODE_LOW, ExtWPRPeriod, i)];      
       if(!CompareDouble((dMaxHigh - dMinLow), 0.0))
           ExtWPRBuffer[i] = -100*(dMaxHigh - Close[i]) / (dMaxHigh - dMinLow);
       i--;
     }
//----
   return(0);
  }
bool CompareDouble(double Number1, double Number2)
  {
    bool Compare = NormalizeDouble(Number1 - Number2, 8) == 0;
    return(Compare);
  } 
//+------------------------------------------------------------------+