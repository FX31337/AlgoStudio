<metadata>
5f63dfe091e9d3bec0acf7d7dea8c8ad205263107118721ddfb1e5d8d2f07746ba94330372502303bbdeb7d92d4ef29d5e3ab6df98f680e7a598795ba1d445315d3b29046c54c5e75e61615fd0ec3d50c7a8c5a10673a5c9b9dc8eaebcca096c8cfefe8d90f90966f29cefd283a1b988bc927c4ca183f5cbdce0aec0741598f55f3adbe5ace1edacc0834c08d8e41a3578166100375a583d5b65bf83b4c0f38a6515ef8ad9e7430a0e600a6efa9304670362beca3a556614e6da0e211a6e9fe6fb8b187db18fc9f5a0cc7c1d89e792f5d2a7a5c43750f99c46782e637223420ebf8bcbf799b63a56b6d7640af394becb33521d7a2f4a86b88eb2aecf2c5987f3f8901d72c3b1d9e79af2bdc9c9bd86f69ba1def14d62ec9b6a1d82f5c0ee90fdc2a73246e98890e11c6977187b0fe58094e7edc3cda33752a6d2002f7f43f8d70b6a2e5b7f0b6d05dfb0493b251bfcc0593ad0bfdeb395e5c6a796f8d4ad655bc98a244b7d101b6b27461977f08944784c6352316f00422f56260a6b4d230b7290aeb5895231afc087ea85e8294c056b5f2bb4c799a795a94c634b28b8d780ed78152247a8c6f3876d1ee8d6ac9092f1bed1e292d9a00d7f523b8cebf199b9cde89b7f417437721db6c695ec0270c8a19afdcca434405d7d67ceffdf27150a3a685825113519fddde9a4ff9a2054b7d6a9f84b3e81ee23572d48bfcc10306c3f412ebfd97a0e562191f0c8ba4227082895d64a25fb890979b8962e120c2393f0137c15655e27582abbd2ddba412975019fec615f1824e3879dfc6c183d587e31157342013d4f91f4b0d186f22148f29d86e8d1ef3507497f3f11e9d97640cbe5291bccfce8d9d3e198a429060f6b1372dbaf680d7b34f791d695ec9e4f2adfbebfcb31586a05fa94fcc2112d7a1ff1896d1dcd89214095e1d6b396a8deee2312301e0d3d5d6c2e000d3d4676bb8b5c6da894f3dc2144bcc4cebef2b666073e4aa1c479478eb2c7b7b5d4d9aa50239becb3dc2250a0c4251bf8c4a689cdbd67066e1d51220572385743314e2abe806854a9ccef9761008ae4a4e83b5aa7c90265bc82a5f56f1d046ba1f545375c3d17737f1a0c7e6e228decdfb1086fd2a76a0b791e583d9aa6b39c2643d6ae7918f7998ac63f5e84ea5b3c94aa013d7604e782e3853b5eea98abce056b3251751096e5dde3c2fe4f3dd7b26e08f693d0a2395c81ef97f4a3c694aae9b2082d712180d293dcc582f6a4d796064b240195c887db2a7afe9f05663952b7d6b0d7fb9eb8cb702cadc0c6b7284445714b65e1915033d6bbb28e644bc6b413763f59abce2a58583daac493f08de892ac4478b69990e25336066052371a68492c214fe7847d182556c7f9417d98f11b75b8dc0861147791f00571b5dac9bbfbb4631311654920a0cf600e6615311196e5d0b56f1fd3b25426b2d37a0e7510102d0b295206196b7c0956337c5e427ce6dab0dc88e1315f0663587898f65b3af09db8dd132e0123b5f97f16f9977b1e19394273133180a0bad9a6c9a6cacfa0bcce6d50684aebc65f6b5e6f86b2b5818db4d1e77545d0f20b2bc7b4d9ad156cd1bd81e428156a4895a5cbe935156116f89182e64632fd953f029fbd93a1331131113241e9907f124c2e5f30a2ce102d092b9eac5c6d2512f2d083a384f2ea83b7c4aac380e298f4d6b3bc81d8fab7e3493b46335035a183023c201c507f99f52c455d3385e0d7e91824f79b573ee38d7015c6e6731d99f8117c66037944ceecbff3c4ada1cf583dfada9dac7e5cae8e2645c3acbad696f98bf9774acdef230e1a2c4277fecbae9df7c12a087f5f5a29f1852d54b2deaecb5964200257671537cded3f48e78eea8e384c2941261bba98e4d5735183a30576bdc42e43f092a6c999f5320fe9cb3604063791a6092bcaea384ecfa6c4b7ec85afcdfc904f2a7e436745ca9e7e0cc5b0debb4361fec0d6ea745b5e32afc6016f0164d9e75f636d42a8c17a14b0d43c55563503628afe28476f1deda23040d0a4e089fa95a7c936451927635f42314025453789e06b0ee794734d99dfc9a86804acdfdfbaba864a6531421174b0c2d1b8dfbaa7d4330ddee2ed9fa6c3e7934c1858216c1c0560fac42c68ef803d486604d9b55b3e370bf0df770525407c080155c1b889f903665f61201cb4d903626c1493d17110f88a215210522f4ee7841972734dc5f54e721e31137e82e3e39b1c5e1372f082dcaf4103086981e2d8b34779f7cbd2b74729c5a43f5d5d319efb0647d4b8294c83f1235786f5caf4f6b00667d4b8eb98f491330fe3ccb3d6bbd5b5d43f5d64088beed998462a3b5ed8aa99ed2f5c2e10b985fc994a24bfde7715771b9df8682b1a77463282f03d4459673a7cb1d02b473a49b5d06d518ca3c9ac9af480e136542b47315402410f62691d2b59d8a13d03c5f980e5006e77162042b4d8e6833f767b15d5a12c5ec3a280e27918ed9f4c7281c780e17814abd8f99c84b84c63f590d9b7aecff597d3bfbdd8df96630d691de2908ced284ae0817f0d87b93905406f204db6d9e98d7f0afa965b3e4e709f06bc6636cd023ad37f3c5f4ffbb996
</metadata>
//+------------------------------------------------------------------+
//|                                                  Custom MACD.mq4 |
//|                      Copyright © 2004, MetaQuotes Software Corp. |
//|                                       http://www.metaquotes.net/ |
//+------------------------------------------------------------------+
#property  copyright "Copyright © 2004, MetaQuotes Software Corp."
#property  link      "http://www.metaquotes.net/"
//---- indicator settings
#property  indicator_separate_window
#property  indicator_buffers 2
#property  indicator_color1  Silver
#property  indicator_color2  Red
#property  indicator_width1  2
//---- indicator parameters
extern int FastEMA=12;
extern int SlowEMA=26;
extern int SignalSMA=9;
//---- indicator buffers
double     MacdBuffer[];
double     SignalBuffer[];

//+------------------------------------------------------------------+
//| Custom indicator initialization function                         |
//+------------------------------------------------------------------+
int init()
  {
//---- drawing settings
   SetIndexStyle(0,DRAW_HISTOGRAM);
   SetIndexStyle(1,DRAW_LINE);
   SetIndexDrawBegin(1,SignalSMA);
   IndicatorDigits(Digits+1);
//---- indicator buffers mapping
   SetIndexBuffer(0,MacdBuffer);
   SetIndexBuffer(1,SignalBuffer);
//---- name for DataWindow and indicator subwindow label
   IndicatorShortName("MACD("+FastEMA+","+SlowEMA+","+SignalSMA+")");
   SetIndexLabel(0,"MACD");
   SetIndexLabel(1,"Signal");
//---- initialization done
   return(0);
  }
//+------------------------------------------------------------------+
//| Moving Averages Convergence/Divergence                           |
//+------------------------------------------------------------------+
int start()
  {
   int limit;
   int counted_bars=IndicatorCounted();
//---- last counted bar will be recounted
   if(counted_bars>0) counted_bars--;
   limit=Bars-counted_bars;
//---- macd counted in the 1-st buffer
   for(int i=0; i<limit; i++)
      MacdBuffer[i]=iMA(NULL,0,FastEMA,0,MODE_EMA,PRICE_CLOSE,i)-iMA(NULL,0,SlowEMA,0,MODE_EMA,PRICE_CLOSE,i);
//---- signal line counted in the 2-nd buffer
   for(i=0; i<limit; i++)
      SignalBuffer[i]=iMAOnArray(MacdBuffer,Bars,SignalSMA,0,MODE_SMA,i);
//---- done
   return(0);
  }
//+------------------------------------------------------------------+