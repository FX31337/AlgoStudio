<metadata>
65590d327901d0bd3f5365459cea4b2e22501360c4ad9af5016f9fa257753405dcf20a3a3f1df8d8c3a64b2570135e31294de9807816f790b78a0b299beef480e680edc0e8d0d0f26b54033d635fcfa2157a7d195124b0dc583d0424b0c6d9bc7b09ccbfd7be83ec7f11605d76540233301efece4d6fecd2122e345ac3a24a271570132d2674fdae99d0be829fb0dab4bbda1479385db28c3c0042368af35828dcb96759ce87a7c90d6968010d6e43221f6bf39ca1d3b884e2cdf88c0a7350201075c2fc506c7c10cfae76188deaf0856e0f6d0a7712a997b3fe97c67f33d3e7e6da69467418b2d3bfd1bfd8c9bc0f6edabd37527c420f33ccad592c91e5254d6a054f3d29176a02bdc997e309799aa0416e2e01cdba285f99eef8d64e23c6a31d698aebd9a8f3861c73eb9f2b4eef9c6e4092fc3451285cfad58ab6f8d780e15623b7c3f991aec1ddaf0e30211d95f6a3cc1a771565aecf731d255c417fa6e5412ef09db9c9a1c0ec82275ee4d84a658dee157aacc1bbcbf091721cb3ca88b61529b4d7533c472a284505609df34c38becd8eb085b9d4fb5a39127d127f8fe2197c056b592d4437d2ec2a163c5facc399e9552ca0d25d34096e39511165c3b095abeeadc9a6344459202654c9a0aacdc1a9e490d1f178d184a4eedc1b2b4070cefaf1dd6f4f6b2688ede793a8c943120d7818774b3f7c19ff8c9ebe9ac9137c2d4b7d09384fea8ba7d55f3ae2c26b28a6c92d5ffc8c755b1824a38c7c1f620d700018614b39e68f6502573fb5c16b18dce2a894aecac6a76014e2870f408fe986c50674e085fb9af88cf69ff59ad1bf251b14266d5ba08e3606586ec2ecd8ea685803322a18172baa855e3a1b7a780c23467936c1a703401d6f7f1a72133642771ecea1fa9490ae3a06e683077f106081c519780074bfdadce2033323125a7496a6efde614fd1e15e6e25155564b78bd6f91c792c542656b2f63b5a245065002d1325191f6f0263abd84d3e94e3bcd3c0b2d3b75a64300ceac5ef9f4928601357244532f798fd8faeca0f31eed26c09453d6809dab4c08c4e2f47290f68556b78280674a9c69dc9b0c2cfaeff9b0d688bf9367a4f2ed8b6c8af2257a4c53e5934517c401e31a1c4b8c0debf5a34ade1244508664225f0ceb5892557c1a4ef892a4f85f786e33e50b4d73b5e23504b75aa964230f095294f6702691b3d588ae420433f5a043ab6edd3f6f3a3f8aa2867783fb6e4c283115cad8896cb81ddf1a1b4d5c7a40c67d6b714731174f281aef282efcabb412dbb8f042a94e4bdde472a310d6f40f98b4a2f7b1dd0b5e391cfaa224c1f7c7411ccf2e5d9ddf299ebafca345297f20b79395cddb3fc9f1471becde6d87b4794fd543a1276721b5f3c3859710536593c4e08474f3fdaaeed84701f7c12c8bb4a6a86f50762fd8d791889fbaecf1561593c0a37496bd6820775196cabce9fbd6856e9d5dbb73e575a3454311f3fd8b68dec127fc1a499a4a98befa3076e37592c49d6f60435587a4a6a294a412e6d01056a6614e0dd2705c0edb081d6e2d7e04f78b58167579cad506798baa6864b38c2b6d3aacca0fd986a57092be4d4ba98e7c7651250391a7e43373c546f52290b96a797b5ccec53202a53573aaac8056af09cffc2092b380a7a4b88bfd2f0ae8e196f92fbb1c2d6bfcaa8f894cca9033e1d3f11454e3caedb2d48466496a81f23012e204c6f06deb0a9cc5866d8e4537c88e158369efafa939dfeabca384c67085220e5aa7f0f4f3bf990fd920f616112320c91adacdf680d8efc85ec44214b38241a4107bbda92fecbb82540fcc0270865162346aedc1b72fc996516013f487485f75134cebac99d2d541d6df792a59bade99cf3d1a47c1eea86b3d6427edcf36614a7c20d79a2f697ee3d4d2b4ee0ded4e86b064524324af6b48fee0a7887f42c6e0a6b7615a3c80f31b282dee284ab19745e3f6d1586c4fb9ad3a1f2817c3ea7c68be8355eebd5a09c2d48ea84cbaa86e4b6dad1b40f4e25492d4897e58df9097a90aee9af7b1aadc1c6b5a4c1ac90f0dfa9ccef81cfae5a38e48821440746e88480e5f082becafc8f9ca2645843268be50b6a80e23a56a8cdd7940f62582c2a58631a744aacea90f10b670f7c75101b27e2cd91f4a0cea4c5b7d51d71395cd596006dbcc81163bdc4251b566ab2d73856e88951333b57b7d2226bafc13f4b186a355434567f1e4c3e665812547c1d04680271c6a3fdc183acec89315f711095f7ea86dbbe2960a4ca8afe15675c3dccae1071e69459670f330b24503dd5ba6f0bdca90f631570417f2e594a3a8f9e53e15ccad623d04d4281
</metadata>
//+------------------------------------------------------------------+
//|                                                          RSI.mq4 |
//|                      Copyright © 2004, MetaQuotes Software Corp. |
//|                                       http://www.metaquotes.net/ |
//+------------------------------------------------------------------+
#property copyright "Copyright © 2004, MetaQuotes Software Corp."
#property link      "http://www.metaquotes.net/"

#property indicator_separate_window
#property indicator_minimum 0
#property indicator_maximum 100
#property indicator_buffers 1
#property indicator_color1 DodgerBlue
//---- input parameters
extern int RSIPeriod=14;
//---- buffers
double RSIBuffer[];
double PosBuffer[];
double NegBuffer[];
//+------------------------------------------------------------------+
//| Custom indicator initialization function                         |
//+------------------------------------------------------------------+
int init()
  {
   string short_name;
//---- 2 additional buffers are used for counting.
   IndicatorBuffers(3);
   SetIndexBuffer(1,PosBuffer);
   SetIndexBuffer(2,NegBuffer);
//---- indicator line
   SetIndexStyle(0,DRAW_LINE);
   SetIndexBuffer(0,RSIBuffer);
//---- name for DataWindow and indicator subwindow label
   short_name="RSI("+RSIPeriod+")";
   IndicatorShortName(short_name);
   SetIndexLabel(0,short_name);
//----
   SetIndexDrawBegin(0,RSIPeriod);
//----
   return(0);
  }
//+------------------------------------------------------------------+
//| Relative Strength Index                                          |
//+------------------------------------------------------------------+
int start()
  {
   int    i,counted_bars=IndicatorCounted();
   double rel,negative,positive;
//----
   if(Bars<=RSIPeriod) return(0);
//---- initial zero
   if(counted_bars<1)
      for(i=1;i<=RSIPeriod;i++) RSIBuffer[Bars-i]=0.0;
//----
   i=Bars-RSIPeriod-1;
   if(counted_bars>=RSIPeriod) i=Bars-counted_bars-1;
   while(i>=0)
     {
      double sumn=0.0,sump=0.0;
      if(i==Bars-RSIPeriod-1)
        {
         int k=Bars-2;
         //---- initial accumulation
         while(k>=i)
           {
            rel=Close[k]-Close[k+1];
            if(rel>0) sump+=rel;
            else      sumn-=rel;
            k--;
           }
         positive=sump/RSIPeriod;
         negative=sumn/RSIPeriod;
        }
      else
        {
         //---- smoothed moving average
         rel=Close[i]-Close[i+1];
         if(rel>0) sump=rel;
         else      sumn=-rel;
         positive=(PosBuffer[i+1]*(RSIPeriod-1)+sump)/RSIPeriod;
         negative=(NegBuffer[i+1]*(RSIPeriod-1)+sumn)/RSIPeriod;
        }
      PosBuffer[i]=positive;
      NegBuffer[i]=negative;
      if(negative==0.0) RSIBuffer[i]=0.0;
      else RSIBuffer[i]=100.0-100.0/(1+positive/negative);
      i--;
     }
//----
   return(0);
  }
//+------------------------------------------------------------------+