<metadata>
734fa7989ee6432efc90d3f3abdd8fea2e5ca1d2dfb60f60721cdae787a50637a58b605014360626d9bcf19f4d2e741bd9bdbbd2c3adfc9b6c51ebc97e0ba2d6a8ce466b7e4692b099a62d130a3639547a15ec88d1a486eafc99d1f1146265002755adde563f402fe58b1a277d5f9eaf446afaca4d6f82bc7a462c42f899fc91a2c7e0dec790e0b0f2a0cff3bf90197778198ce175100d33c6fa3743f881baca157092ac0f461f71ee8ab2db294ac6a77f0bf9963446e6da8da20d79770ea2d28bee2c121e22d5b90061deb0395e15602f4ea1c6701597a95b167a2bf8b4132775498ca3274bf99895fb402773068aebf3948de89aa4360acdacc1b4a0d4f79fbcd34f3d7a44b7e7672195c60669d9bf3a4ed8e40c23a2c3b0c5d4a0f890b1de92e0211fad919efd422d1974a6d6a6c7650b4c351b2527774d0b0053dcb3fe9884f04975fad5bbd889e6a6cb7606e3825739f28b77492a1667042d424b269ef33257abc55c28fe8d1d2382d51b72325e0965127bbadb87ea80a0d5f0e1b3c5f91f30ea89bed13d50a4c9d3b699f761156b18310fffc3c3a0452acfbfbbc2bac8660f563148203145582b1b253675741b72020f760072036a89ee721a94e068487ed76f4fd6e44a7a5f6fe1d4052980a080cd7613007475144312a4d15c33d1a5ddb86112fada3c6fbfd0086ebace7c0b7213c4b6284d73530043e38c57258cfc002e477be8c7b9dab6d9384820594b396108197e1f776317dcaf5f61340854302342b8ccd4b194db583e337004760c69e180add90f66d8b7e886ead46d5c7340c2ec4676dde5bb953b096858fbcb566f84b88ea10266305182f6d3b6155ad6b0eead6f1d75101776add92148d2bdd2bc3b05625e3f5a86fe90e0e4a0d0b146324722083619290839557b42721627c7e9310172421323ad9c35090b241471b0c80f7ff0b46b0a1d69a1c4dbe55a66d4a4d6b75b28e390dea993fcb9cbe98d2618d2ee1b345f2fa1c0ff8c52214235543b86f441254b75ab974a255421c6b2afdf99ece490417f702bb39617473e6c733c89ced684c1801f52c5e0207db7eb7d34ddb36f0bc4adb7d495f4c4b0533c2f5d0c7f91cd4874b09f1f70b8cd0b7fe6960075c4b082bc506c294c1a62e180c8a68ac693f29ef060079ea0b1e12b5918776c38324082e37d191772afdda5e95a3b3d534621deaba6c7b5d2a9ccf6ca2e01610490e8bddc5e30f3bf1e7f89e73651b7893b077f0d6702d9bf5134cebcf99c1a7498fb03665c2fd7e959655624f297a3c5e5806a184f2adbb5d4b7b7d2c7f97c27cbee5202e4b64a056e29e4b6f6b71558b792d28f366a9fcf86e7187b741f0564690e3653a5d63a66f69b6617f29ef7c36b4519695c3f0a6780bcb59aa2d056337513bcd9bdcf54316b05f4972e4b7a4491adfad52456b0d5deb8a3c6afdd600599f7a6c5c2a71764c5fbaf93e38ab9d7076398f1dcbfdfbe03773f50e89ab8f7cdbd4236d5bc620dc4aa9fec7e5e06756d08e191d6b7b6c4debfb3c76e0b407da98b6d391c6e83f694f14e6c0937437f234f9ff6a2cc7712f7d7e58badcc305d5f3a635e3a18cd81630abed03c592b0b566713317b5b096ab5daa8c47718e89adbe663411e330c3dd4e094a332056450cefe0d3c8abd90b23f1f384be99d057cafc33c59b78a42609fafaa885373ceb9b6df0763fb8fa8c02c11eecc92a3ab89fede4231522bf8953557e18e177bab967b59f4c6b382fbcc301285a59cea721be192b7dec7a5ed815f3a8bb6c8ea0a5ebfcd0d78385d5f7d2d137844103f5e32f1985d33b7d2d2ec1c2027084d245a34b8dc9bf2650689e87105caa5d4a6763907770773442d5e3148265122704e14283546aecbb4c6b7de54318efdbc825315e6873c504734b8ddedd1d3fc89faef8ac8ba1871c6a3344791af3e022a584d28a4d077237c05ee9e7316330d480c1a7591e4c8aacaa636537c406a457002bbde1b6fa4f01960c4b41471f6c85a66177a1978d9a13476d5b40c7e7407357725441172f59e330d3e0ec4f8cde290fd18793b43ffbd99f855272556e4a628491675056efdc3ead6dbbecea0c2a3d4b66408debbcb8a4a261174e496225685f6e3dd753303628ce0d2a15237cff3cae5ee8b9cf287e61270dfb3abce7e3f4f23b5d02a587501364587b9132fddb8cca2afce85e7680434512e6dd1bcfd8993e195ecfbc55c1a93f29ff3b6c5c3a6013d5679b8dd254babcadab85e3267027a39117c13672755621bab952d11593cc0ae1879dcbe7d11dcb97a33cca20377bcce09686604e2839eec8db30d4b4f2e660ac3b0a7c2f7cbf4db87e282ec89e8f99b88e4afca9dd4680613671f6d2d4cb9dbe889196b477909359cb386eb650ab2d61065107c07628db329e6826c307c6cc9595f65cdd5dade88
</metadata>
//+------------------------------------------------------------------+
//|                                      Williams’ Percent Range.mq4 |
//|                      Copyright © 2005, MetaQuotes Software Corp. |
//|                                       http://www.metaquotes.net/ |
//+------------------------------------------------------------------+
#property copyright "Copyright © 2005, MetaQuotes Software Corp."
#property link      "http://www.metaquotes.net/"
//----
#property indicator_separate_window
#property indicator_minimum -100
#property indicator_maximum 0
#property indicator_buffers 1
#property indicator_color1 DodgerBlue
#property indicator_level1 -20
#property indicator_level2 -80
//---- input parameters
extern int ExtWPRPeriod = 14;
//---- buffers
double ExtWPRBuffer[];
//+------------------------------------------------------------------+
//| Custom indicator initialization function                         |
//+------------------------------------------------------------------+
int init()
  {
   string sShortName;
//---- indicator buffer mapping
   SetIndexBuffer(0, ExtWPRBuffer);
//---- indicator line
   SetIndexStyle(0, DRAW_LINE);
//---- name for DataWindow and indicator subwindow label
   sShortName="%R(" + ExtWPRPeriod + ")";
   IndicatorShortName(sShortName);
   SetIndexLabel(0, sShortName);
//---- first values aren't drawn
   SetIndexDrawBegin(0, ExtWPRPeriod);
//----
   return(0);
  }
//+------------------------------------------------------------------+
//| Williams’ Percent Range                                          |
//+------------------------------------------------------------------+
int start()
  {
   int i, nLimit, nCountedBars;  
//---- insufficient data
   if(Bars <= ExtWPRPeriod) 
       return(0);
//---- bars count that does not changed after last indicator launch.
   nCountedBars = IndicatorCounted();
//----Williams’ Percent Range calculation
   i = Bars - ExtWPRPeriod - 1;
   if(nCountedBars > ExtWPRPeriod) 
       i = Bars - nCountedBars - 1;  
   while(i >= 0)
     {
       double dMaxHigh = High[Highest(NULL, 0, MODE_HIGH, ExtWPRPeriod, i)];
       double dMinLow = Low[Lowest(NULL, 0, MODE_LOW, ExtWPRPeriod, i)];      
       if(!CompareDouble((dMaxHigh - dMinLow), 0.0))
           ExtWPRBuffer[i] = -100*(dMaxHigh - Close[i]) / (dMaxHigh - dMinLow);
       i--;
     }
//----
   return(0);
  }
//+------------------------------------------------------------------+
//| Ôóíêöèÿ ñðàíåíèÿ äâóõ âåùåñòâåííûõ ÷èñåë.                        |
//+------------------------------------------------------------------+
bool CompareDouble(double Number1, double Number2)
  {
    bool Compare = NormalizeDouble(Number1 - Number2, 8) == 0;
    return(Compare);
  } 
//+------------------------------------------------------------------+ 