<metadata>
162a3c03a2dadbb66509c4e482f412771466f98ae68f1d7294fad3eeb694a091b9974575c6e4e6c6d0b5dcb25e3dbad52541dbb22a44c0a7d5e899bbc0b5e4907d1b5578cdf51a38fbc4dce2dae65c31b9d63e5ad8ad85e96e0bf7d777015e3bd5a73d4ecea70b64523cfbc63a184776eac43404567468569ca0234def8ec4a9b6d3c3fd1756e18294f73e5ba0ccd1b4ff8dd2b39bef345b77056f53e6c90769d1b065089bfea7992f1325512d5424540560417f3a73d1bf096df990f390e988bfcb6c036715300cae810a7e3a433c4ce481ccf2e9d5eb87b7d6d5bb177005705b3a6c0bc0a5a997034ea2f3da96b58195a92e014d21197889e76b0c33469dfc44230366b18f3d015c3dc9bc92e65a32abc4c3b1261848200f7bb8cc0d7d99a3210e2d02f28516619dead9f7573ab3d6186cf29313620a7f335cbdc90164067585abb9d701641b6f032c536f1d321d7c56230672bad2f49ba9db48763a06bfdcec83107d1a6a84e5e8869ae32c12682b442bdab7e494c8a9345a1e67e8d4d6f92e4dcea11e73d2a20968630d0e77a09ef2ce6b08513e1a774825f89d94fa81f5fe8dbb85c7fbf1de3c5f127d80edabc6a0c5563837430073e4dab4884122d4bbed9daed73f4d503965020a6200740675380689ca78170d7ddca5e89a6f06ea8dd4bcea9e3c1c7ad34a6ac6f4aa9afece86b380acfcdc622fadc87703a3c2144590e5ee81acd8294c3c4fe0c0a0f3452a7711f185afd8f293146615700121692a5d32c7b5c5b5123c506c624d3350c8a74c3c077ef7853c55e2852d45d8ac71023907ecd0f3974524b4c0ddb8723d9cfae9aa82f0a7c285e4681c6f0608672c42b58b83b1cffb3c127c4cb486f6d8a597003000313e0fecd0143bf99dc5a4bfcbb2d79ad5ed8bd695a5d79efb08690d791178d5baff91447ab68a0e6bf38b453552162342bcc8b6d37648a99984b5ae80c6f63100dcf2bf8f98a85b6b8ebf300c634c90f5740c35453e7ab0d11e6aeb8e7648bd81e999f09187f42d5e7b0cabc4d6a4bcd884bacbf7fbd4a0d0e3824d3e53207c0bf19ea4d66d09e6d8f3cf680d81f9e584432ddf933f5e2b45ddba7a4487d7483ae58a92c672004223ee8af29781f3622e88e9a0ced7b0b2c756371c7b1673f1cd0b240b6e4b33f392ea84236fd1b0e28cf097516f0c3005770065395f7b1e07754520f7992645debb4d3ec2fcbc80740687e2bfd988ed73013e5b5c322e4dd4b11e20cb9005201b4b43110b44f3b4491b54153f72ae8b471a3b672b7ba6c7e98adbb05b3ac1a6f99c4536eab6e38e562781ed182c80aedaaae380c2af0c304a6553211b7e3157b1d44c3eb4d10a64b9da86e317299aa6e5ca02700366f89e026760120762214f4320ef8ac3b0447a5468680199f7395d8ae3f6956b0aed990b643042692687f793e74d249df2224caeddf5d5b8cbddb87c0c7110b1c3d7b6f387e88d7a47b5974a1e2d5f7a0fbcd952703d03d1edbed22c451a741a7f6545b6d8ee8f2c41ed88774a4f6dfab62b42701e731651717b4a9fbdd6f60d6e3758513d2e41a6d468556f4d5c714a7b320405327c4bb186d1e307361620240648682655f185a7de177babce073a496b2919f4d624040e79610889edb0c4731b4578b694a495b6942303ec9f532a9bf604667b14503c6b56dffdd4e6e0d13b0cdefc2f0f7e089af34b38711890f2e5896702e8d599bb2a7e3b4982f716733416526c132f220d234ff69fe48a6702f6c8172be28e1e770967f491c3e3026c5332690493f6467bd5f7a8e4a6cf8ce2056080a03d0cb3910d2d80e3c4abc0ac016ed2a01825cae8e3cee9d8b4825b6c4672390d0b3ffcc890a8bd9faa8a85f66a1e1168e4881c796f52597b4a7a1331bc9c3b4cc5acc9ade7939ff7eed3c6e44e7fc2e02808b5c6126b97faff9d3758ed81b78a2b09dbe994a53106183a9fbf60167d140073adc4385a5d313f5acff20725a7f3394bf481492cf6d4e9d74579173835592049a9c7f297fdc3b78b4e22a0c95e3093f6e6c61c72f190e78af0952f12c9ebdb97167fed836b0eaa8a7f4da7853515c3a01976c3af741b5e2c91ac93b1a38e86b07e4b89bc42711e287351a88822518efa50295539f693427fb694596996b44f6f483f553c3c5880f44129f3ced8fa7041a381032367140b72c0ad6604254a7814dfe2fcde0d3fe9d8a89fe1c3654580f65b326013096071139df1f194310c2f0dadf9d8aa9eeb0a6f7b59a698ba86547badc15930cba54b2e4d73e1dd634c4c2583ed1a7ef59cd7b44829afdba0cf097bb9f61060b6c27f16016e88e63c4fd2ec2a167407127770027118bfdacab977491157a3c27b171c6f781d2b17ad822053a0c5483a4d24177284f76957dee26f1dbfda1b6f2c7881f8a5d51570330d9dd9b0dfcdb87517006c0366764a220d6113a6c32652085c1f66b4c40560605ee2deb1dc0f6e374f7634a3c2a9db80f3fcbe4223395a4c2799a75262fcc05c738be6d4b5443ccc8e026372006516aeec1a7b4f2c7a1190ae98a49cf9157b36571b797d11fd985a1b0b674421a5d762167704fdc31e582948670b5023006593af2c03b8dd1b75d1b0e587bdd19cf99cddaac6e580a0d27307c3b0132d734fa6c3c8a66302ceacfa96adc8e6a5610cb1c5aedc5c25b789d89ec7a6a1cd93e03d58fac64e61cfaaa8c6e584a8caa3cfc2a75516d4b9205497e5344deed05965b0d51a74f293c2a06509107584cd8be5285ca3d1ceafb0d200613547645a713796f7f39f097a5a3f734fae81e287513fbadb503269051a7f460f3f51522605776a0bddbfd2b3582a2d13102cf8d78fe297f81f7b3b4e9ff3b1d4c8f6d371c39f026edd0c07e3a1e47b561559
</metadata>
//+------------------------------------------------------------------+
//|                                                  Accelerator.mq4 |
//|                      Copyright © 2005, MetaQuotes Software Corp. |
//|                                       http://www.metaquotes.net/ |
//+------------------------------------------------------------------+
#property  copyright "Copyright © 2005, MetaQuotes Software Corp."
#property  link      "http://www.metaquotes.net/"
//---- indicator settings
#property  indicator_separate_window
#property  indicator_buffers 3
#property  indicator_color1  Black
#property  indicator_color2  Green
#property  indicator_color3  Red
//---- indicator buffers
double     ExtBuffer0[];
double     ExtBuffer1[];
double     ExtBuffer2[];
double     ExtBuffer3[];
double     ExtBuffer4[];
//+------------------------------------------------------------------+
//| Custom indicator initialization function                         |
//+------------------------------------------------------------------+
int init()
  {
//---- 2 additional buffers are used for counting.
   IndicatorBuffers(5);
//---- drawing settings
   SetIndexStyle(0,DRAW_NONE);
   SetIndexStyle(1,DRAW_HISTOGRAM);
   SetIndexStyle(2,DRAW_HISTOGRAM);
   IndicatorDigits(Digits+2);
   SetIndexDrawBegin(0,38);
   SetIndexDrawBegin(1,38);
   SetIndexDrawBegin(2,38);
//---- 4 indicator buffers mapping
   SetIndexBuffer(0,ExtBuffer0);
   SetIndexBuffer(1,ExtBuffer1);
   SetIndexBuffer(2,ExtBuffer2);
   SetIndexBuffer(3,ExtBuffer3);
   SetIndexBuffer(4,ExtBuffer4);
//---- name for DataWindow and indicator subwindow label
   IndicatorShortName("AC");
   SetIndexLabel(1,NULL);
   SetIndexLabel(2,NULL);
//---- initialization done
   return(0);
  }
//+------------------------------------------------------------------+
//| Accelerator/Decelerator Oscillator                               |
//+------------------------------------------------------------------+
int start()
  {
   int    limit;
   int    counted_bars=IndicatorCounted();
   double prev,current;
   //---- last counted bar will be recounted
   if(counted_bars>0) counted_bars--;
   limit=Bars-counted_bars;
   //---- macd counted in the 1-st additional buffer
   for(int i=0; i<limit; i++)
      ExtBuffer3[i]=iMA(NULL,0,5,0,MODE_SMA,PRICE_MEDIAN,i)-iMA(NULL,0,34,0,MODE_SMA,PRICE_MEDIAN,i);
   //---- signal line counted in the 2-nd additional buffer
   for(i=0; i<limit; i++)
      ExtBuffer4[i]=iMAOnArray(ExtBuffer3,Bars,5,0,MODE_SMA,i);
   //---- dispatch values between 2 buffers
   bool up=true;
   for(i=limit-1; i>=0; i--)
     {
      current=ExtBuffer3[i]-ExtBuffer4[i];
      prev=ExtBuffer3[i+1]-ExtBuffer4[i+1];
      if(current>prev) up=true;
      if(current<prev) up=false;
      if(!up)
        {
         ExtBuffer2[i]=current;
         ExtBuffer1[i]=0.0;
        }
      else
        {
         ExtBuffer1[i]=current;
         ExtBuffer2[i]=0.0;
        }
       ExtBuffer0[i]=current;
     }
   //---- done
   return(0);
  }
//+------------------------------------------------------------------+

